<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>性能优化概述 | you know nothing</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/Bloging/img/logo.png">
    <link rel="stylesheet" href="https://unpkg.com/mssui@0.1.13/lib/theme-chalk/index.css">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.min.js"></script>
    <script src="https://unpkg.com/mssui@0.1.17/lib/index.js"></script>
    <meta name="description" content="记录生活,点滴成长">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/Bloging/assets/css/0.styles.7e19c1e2.css" as="style"><link rel="preload" href="/Bloging/assets/js/app.2aa6d5b3.js" as="script"><link rel="preload" href="/Bloging/assets/js/3.96531fce.js" as="script"><link rel="preload" href="/Bloging/assets/js/4.8451043b.js" as="script"><link rel="preload" href="/Bloging/assets/js/74.15075fcd.js" as="script"><link rel="prefetch" href="/Bloging/assets/js/1.fc2f76d2.js"><link rel="prefetch" href="/Bloging/assets/js/10.8641cfba.js"><link rel="prefetch" href="/Bloging/assets/js/100.df77cb7e.js"><link rel="prefetch" href="/Bloging/assets/js/11.b2a25797.js"><link rel="prefetch" href="/Bloging/assets/js/12.8ebf8caa.js"><link rel="prefetch" href="/Bloging/assets/js/13.f8c25d16.js"><link rel="prefetch" href="/Bloging/assets/js/14.26f1cd6d.js"><link rel="prefetch" href="/Bloging/assets/js/15.4055abb9.js"><link rel="prefetch" href="/Bloging/assets/js/16.53024b04.js"><link rel="prefetch" href="/Bloging/assets/js/17.87929c73.js"><link rel="prefetch" href="/Bloging/assets/js/18.37f3a026.js"><link rel="prefetch" href="/Bloging/assets/js/19.b6301327.js"><link rel="prefetch" href="/Bloging/assets/js/20.308e81fb.js"><link rel="prefetch" href="/Bloging/assets/js/21.ae950520.js"><link rel="prefetch" href="/Bloging/assets/js/22.64e3f804.js"><link rel="prefetch" href="/Bloging/assets/js/23.7f06754b.js"><link rel="prefetch" href="/Bloging/assets/js/24.489e5b23.js"><link rel="prefetch" href="/Bloging/assets/js/25.c2a6f1d8.js"><link rel="prefetch" href="/Bloging/assets/js/26.c6d4c468.js"><link rel="prefetch" href="/Bloging/assets/js/27.bb3fd285.js"><link rel="prefetch" href="/Bloging/assets/js/28.9808631f.js"><link rel="prefetch" href="/Bloging/assets/js/29.3f7831ce.js"><link rel="prefetch" href="/Bloging/assets/js/30.58baf494.js"><link rel="prefetch" href="/Bloging/assets/js/31.2bbd00ba.js"><link rel="prefetch" href="/Bloging/assets/js/32.933e6496.js"><link rel="prefetch" href="/Bloging/assets/js/33.9a465bb3.js"><link rel="prefetch" href="/Bloging/assets/js/34.473d46f4.js"><link rel="prefetch" href="/Bloging/assets/js/35.564f3522.js"><link rel="prefetch" href="/Bloging/assets/js/36.111cb779.js"><link rel="prefetch" href="/Bloging/assets/js/37.fd06e443.js"><link rel="prefetch" href="/Bloging/assets/js/38.095ad4e9.js"><link rel="prefetch" href="/Bloging/assets/js/39.65c812d0.js"><link rel="prefetch" href="/Bloging/assets/js/40.c22496a3.js"><link rel="prefetch" href="/Bloging/assets/js/41.0403c37d.js"><link rel="prefetch" href="/Bloging/assets/js/42.bbb3f4b9.js"><link rel="prefetch" href="/Bloging/assets/js/43.f6e9dfff.js"><link rel="prefetch" href="/Bloging/assets/js/44.b1d9d695.js"><link rel="prefetch" href="/Bloging/assets/js/45.b124f4de.js"><link rel="prefetch" href="/Bloging/assets/js/46.1c42efc4.js"><link rel="prefetch" href="/Bloging/assets/js/47.05f1a85f.js"><link rel="prefetch" href="/Bloging/assets/js/48.95136e76.js"><link rel="prefetch" href="/Bloging/assets/js/49.99604df1.js"><link rel="prefetch" href="/Bloging/assets/js/5.f19f5ae5.js"><link rel="prefetch" href="/Bloging/assets/js/50.06b7fbf2.js"><link rel="prefetch" href="/Bloging/assets/js/51.165c94b9.js"><link rel="prefetch" href="/Bloging/assets/js/52.99650a38.js"><link rel="prefetch" href="/Bloging/assets/js/53.62371787.js"><link rel="prefetch" href="/Bloging/assets/js/54.6172303f.js"><link rel="prefetch" href="/Bloging/assets/js/55.bbdcb602.js"><link rel="prefetch" href="/Bloging/assets/js/56.729cdf74.js"><link rel="prefetch" href="/Bloging/assets/js/57.6e908e75.js"><link rel="prefetch" href="/Bloging/assets/js/58.2864a48c.js"><link rel="prefetch" href="/Bloging/assets/js/59.4e55f1ca.js"><link rel="prefetch" href="/Bloging/assets/js/6.60fb555c.js"><link rel="prefetch" href="/Bloging/assets/js/60.af74aae5.js"><link rel="prefetch" href="/Bloging/assets/js/61.7e175f61.js"><link rel="prefetch" href="/Bloging/assets/js/62.6980d3f9.js"><link rel="prefetch" href="/Bloging/assets/js/63.dcb7f769.js"><link rel="prefetch" href="/Bloging/assets/js/64.775818f3.js"><link rel="prefetch" href="/Bloging/assets/js/65.5bbe9a48.js"><link rel="prefetch" href="/Bloging/assets/js/66.b31397be.js"><link rel="prefetch" href="/Bloging/assets/js/67.de105626.js"><link rel="prefetch" href="/Bloging/assets/js/68.1e478521.js"><link rel="prefetch" href="/Bloging/assets/js/69.c7503524.js"><link rel="prefetch" href="/Bloging/assets/js/7.2714efd9.js"><link rel="prefetch" href="/Bloging/assets/js/70.6be8694b.js"><link rel="prefetch" href="/Bloging/assets/js/71.db89b70b.js"><link rel="prefetch" href="/Bloging/assets/js/72.f1a2c437.js"><link rel="prefetch" href="/Bloging/assets/js/73.0f1af1e2.js"><link rel="prefetch" href="/Bloging/assets/js/75.531a778b.js"><link rel="prefetch" href="/Bloging/assets/js/76.4b6dec3b.js"><link rel="prefetch" href="/Bloging/assets/js/77.8db75474.js"><link rel="prefetch" href="/Bloging/assets/js/78.96c5b697.js"><link rel="prefetch" href="/Bloging/assets/js/79.332491db.js"><link rel="prefetch" href="/Bloging/assets/js/8.ac2f19b0.js"><link rel="prefetch" href="/Bloging/assets/js/80.ccf98d3b.js"><link rel="prefetch" href="/Bloging/assets/js/81.89be4231.js"><link rel="prefetch" href="/Bloging/assets/js/82.b1f4a735.js"><link rel="prefetch" href="/Bloging/assets/js/83.a5e40604.js"><link rel="prefetch" href="/Bloging/assets/js/84.488775af.js"><link rel="prefetch" href="/Bloging/assets/js/85.30930aef.js"><link rel="prefetch" href="/Bloging/assets/js/86.a68eabf3.js"><link rel="prefetch" href="/Bloging/assets/js/87.7025211e.js"><link rel="prefetch" href="/Bloging/assets/js/88.3ef32de1.js"><link rel="prefetch" href="/Bloging/assets/js/89.ca3f25c5.js"><link rel="prefetch" href="/Bloging/assets/js/9.27a091e8.js"><link rel="prefetch" href="/Bloging/assets/js/90.225aeae1.js"><link rel="prefetch" href="/Bloging/assets/js/91.e3a5438b.js"><link rel="prefetch" href="/Bloging/assets/js/92.48956e7f.js"><link rel="prefetch" href="/Bloging/assets/js/93.6891c60d.js"><link rel="prefetch" href="/Bloging/assets/js/94.07cde64b.js"><link rel="prefetch" href="/Bloging/assets/js/95.4966444e.js"><link rel="prefetch" href="/Bloging/assets/js/96.c1853b5f.js"><link rel="prefetch" href="/Bloging/assets/js/97.e8c1d321.js"><link rel="prefetch" href="/Bloging/assets/js/98.25b0955e.js"><link rel="prefetch" href="/Bloging/assets/js/99.dbab7db6.js">
    <link rel="stylesheet" href="/Bloging/assets/css/0.styles.7e19c1e2.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Bloging/" class="home-link router-link-active"><img src="/Bloging/img/logo.png" alt="you know nothing" class="logo"> <span class="site-name can-hide">you know nothing</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Bloging/" class="nav-link firstMenu-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><a href="/Bloging/pages/7f4764/" class="link-title">基础知识</a> <span class="title" style="display:none;">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Bloging/pages/e42f0c/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/ef83a2/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/c13c31/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/76f4b0/" class="nav-link">TypeScript</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架通识" class="dropdown-title"><a href="/Bloging/pages/a787e4/" class="link-title">框架通识</a> <span class="title" style="display:none;">框架通识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Bloging/pages/bb33b9/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/ddcd99/" class="nav-link">React</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端延展" class="dropdown-title"><a href="/Bloging/pages/a9e92d" class="link-title">前端延展</a> <span class="title" style="display:none;">前端延展</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Bloging/pages/d1fdc6/" class="nav-link">前端安全</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/c926f9/" class="nav-link">微信相关</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/82468b/" aria-current="page" class="nav-link router-link-exact-active router-link-active">性能优化</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/b79286/" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/dcb6ce/" class="nav-link">Node</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/5fa3df/" class="nav-link">hybridApp </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学无止境" class="dropdown-title"><a href="/Bloging/pages/e46525/" class="link-title">学无止境</a> <span class="title" style="display:none;">学无止境</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Bloging/pages/46e3e9/" class="nav-link">算法</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/1/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/2/" class="nav-link">Python</a></li></ul></div></div><div class="nav-item"><a href="/Bloging/pages/fcc60b/" class="nav-link firstMenu-link">闲暇之余</a></div> <a href="https://github.com/zhouyalongs/zhouyalongs.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/MssText/learn@master/images/49203535.35emn5vryma0.png"> <div class="blogger-info"><h3>zhouyalong</h3> <span>天凉好个秋</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/Bloging/" class="nav-link firstMenu-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><a href="/Bloging/pages/7f4764/" class="link-title">基础知识</a> <span class="title" style="display:none;">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Bloging/pages/e42f0c/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/ef83a2/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/c13c31/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/76f4b0/" class="nav-link">TypeScript</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架通识" class="dropdown-title"><a href="/Bloging/pages/a787e4/" class="link-title">框架通识</a> <span class="title" style="display:none;">框架通识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Bloging/pages/bb33b9/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/ddcd99/" class="nav-link">React</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端延展" class="dropdown-title"><a href="/Bloging/pages/a9e92d" class="link-title">前端延展</a> <span class="title" style="display:none;">前端延展</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Bloging/pages/d1fdc6/" class="nav-link">前端安全</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/c926f9/" class="nav-link">微信相关</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/82468b/" aria-current="page" class="nav-link router-link-exact-active router-link-active">性能优化</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/b79286/" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/dcb6ce/" class="nav-link">Node</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/5fa3df/" class="nav-link">hybridApp </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学无止境" class="dropdown-title"><a href="/Bloging/pages/e46525/" class="link-title">学无止境</a> <span class="title" style="display:none;">学无止境</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Bloging/pages/46e3e9/" class="nav-link">算法</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/1/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/2/" class="nav-link">Python</a></li></ul></div></div><div class="nav-item"><a href="/Bloging/pages/fcc60b/" class="nav-link firstMenu-link">闲暇之余</a></div> <a href="https://github.com/zhouyalongs/zhouyalongs.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端安全</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>微信相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>性能优化</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Bloging/pages/82468b/" aria-current="page" class="active sidebar-link">性能优化概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Bloging/pages/82468b/#前端性能优化的难点" class="sidebar-link">前端性能优化的难点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Bloging/pages/82468b/#第一个难点-成体系的性能优化资料严重缺失" class="sidebar-link">第一个难点：成体系的性能优化资料严重缺失</a></li><li class="sidebar-sub-header"><a href="/Bloging/pages/82468b/#第二个难点-性能监控预警平台没有开源-需要自己去开发" class="sidebar-link">第二个难点：性能监控预警平台没有开源，需要自己去开发</a></li><li class="sidebar-sub-header"><a href="/Bloging/pages/82468b/#第三个难点-实践中有许多坑-别人并不会公开分享" class="sidebar-link">第三个难点：实践中有许多坑，别人并不会公开分享</a></li><li class="sidebar-sub-header"><a href="/Bloging/pages/82468b/#第四个难点-性能优化立项沟通" class="sidebar-link">第四个难点：性能优化立项沟通</a></li></ul></li><li class="sidebar-sub-header"><a href="/Bloging/pages/82468b/#性能优化体系" class="sidebar-link">性能优化体系</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Bloging/pages/82468b/#第一部分-性能优化流程" class="sidebar-link">第一部分，性能优化流程</a></li><li class="sidebar-sub-header"><a href="/Bloging/pages/82468b/#第二部分-性能指标采集与上报" class="sidebar-link">第二部分，性能指标采集与上报</a></li><li class="sidebar-sub-header"><a href="/Bloging/pages/82468b/#第三部分-性能监控预警平台" class="sidebar-link">第三部分，性能监控预警平台</a></li></ul></li><li class="sidebar-sub-header"><a href="/Bloging/pages/82468b/#什么样的指标值得我们关注" class="sidebar-link">什么样的指标值得我们关注？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Bloging/pages/82468b/#性能优化关键指标设定及标准" class="sidebar-link">性能优化关键指标设定及标准</a></li><li class="sidebar-sub-header"><a href="/Bloging/pages/82468b/#首屏时间" class="sidebar-link">首屏时间</a></li><li class="sidebar-sub-header"><a href="/Bloging/pages/82468b/#白屏首屏早期标准" class="sidebar-link">白屏首屏早期标准</a></li><li class="sidebar-sub-header"><a href="/Bloging/pages/82468b/#首屏时间秒开率标准" class="sidebar-link">首屏时间秒开率标准</a></li></ul></li><li class="sidebar-sub-header"><a href="/Bloging/pages/82468b/#web-前端都有哪些性能瓶颈点" class="sidebar-link">Web 前端都有哪些性能瓶颈点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Bloging/pages/82468b/#客户端请求阶段的瓶颈点" class="sidebar-link">客户端请求阶段的瓶颈点</a></li><li class="sidebar-sub-header"><a href="/Bloging/pages/82468b/#服务端数据处理阶段的瓶颈点" class="sidebar-link">服务端数据处理阶段的瓶颈点</a></li><li class="sidebar-sub-header"><a href="/Bloging/pages/82468b/#页面解析和渲染阶段的瓶颈点" class="sidebar-link">页面解析和渲染阶段的瓶颈点</a></li></ul></li><li class="sidebar-sub-header"><a href="/Bloging/pages/82468b/#案例分析" class="sidebar-link">案例分析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Bloging/pages/82468b/#性能立项" class="sidebar-link">性能立项</a></li><li class="sidebar-sub-header"><a href="/Bloging/pages/82468b/#获取业务侧支持" class="sidebar-link">获取业务侧支持</a></li><li class="sidebar-sub-header"><a href="/Bloging/pages/82468b/#性能诊断优化" class="sidebar-link">性能诊断优化</a></li></ul></li></ul></li><li><a href="/Bloging/pages/e4ecdb/" class="sidebar-link">指标采集</a></li><li><a href="/Bloging/pages/b2f269/" class="sidebar-link">搭建平台</a></li><li><a href="/Bloging/pages/c512b4/" class="sidebar-link">优化手段</a></li><li><a href="/Bloging/pages/c2cc11/" class="sidebar-link">Hybrid优化手段</a></li><li><a href="/Bloging/pages/0adf45/" class="sidebar-link">性能优化体系演进</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>hybridApp</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-783bcf04><div class="articleInfo" data-v-783bcf04><ul class="breadcrumbs" data-v-783bcf04><li data-v-783bcf04><a href="/Bloging/" title="首页" class="iconfont icon-home router-link-active" data-v-783bcf04></a></li> <li data-v-783bcf04><a href="/Bloging/pages/a9e92d/" title="前端延展-目录页" data-v-783bcf04>前端延展</a></li> <li data-v-783bcf04><a href="/Bloging/pages/a9e92d/#性能优化" title="前端延展#性能优化" data-v-783bcf04>性能优化</a></li> <!----></ul> <div class="info" data-v-783bcf04><div title="作者" class="author iconfont icon-touxiang" data-v-783bcf04><a href="https://github.com/zhouyalongs" target="_blank" title="作者" class="beLink" data-v-783bcf04>zhouyalong</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-783bcf04><a href="javascript:;" data-v-783bcf04>2022-08-09</a></div> <!----> <div class="date iconfont icon-yuedu" data-v-783bcf04><span data-v-783bcf04>时间 108分钟</span></div> <div id="/pages/82468b/" data-flag-title="性能优化概述" class="leancloud_visitors date iconfont icon-eye" data-v-783bcf04><span class="post-meta-item-text" data-v-783bcf04>阅读量 </span> <span class="leancloud-visitors-count" data-v-783bcf04>0</span></div></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">
          性能优化概述
        </h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="前端性能优化的难点"><a href="#前端性能优化的难点" class="header-anchor">#</a> 前端性能优化的难点</h2> <p>在实际工作当中，前端性能优化往往比较繁杂，防布局抖动、HTML 优化、CSS 优化、图片加载优化等等，许多细节都需要顾及。而想要学习和掌握前端性能优化，人们会有许多难点。</p> <h3 id="第一个难点-成体系的性能优化资料严重缺失"><a href="#第一个难点-成体系的性能优化资料严重缺失" class="header-anchor">#</a> 第一个难点：成体系的性能优化资料严重缺失</h3> <p>市面上的“武器库”有很多，你 Google 搜索性能优化体系会出来很多站点，里面提到各种各样的优化思路，如缓存请求、服务端响应优化、页面解析与处理、静态资源优化等。但这些优化手段充其量只是性能优化中的一个点或几个点，很难形成一个完整的体系，让人一目了然。</p> <p>举个例子来说，你通过接入离线包来对页面进行优化，使用这种优化方式的目的是什么，围绕什么指标做的优化，优化完有什么收益，你看完那些资料之后还是回答不了这几个问题。</p> <h3 id="第二个难点-性能监控预警平台没有开源-需要自己去开发"><a href="#第二个难点-性能监控预警平台没有开源-需要自己去开发" class="header-anchor">#</a> 第二个难点：性能监控预警平台没有开源，需要自己去开发</h3> <p>有一定优化经验的前端工程师都知道，性能优化的一个重中之重在于性能监控预警平台。通过它，我们可以第一时间发现问题。但这么一个重要工具，需要你自己去开发。</p> <p>有人说了，市面上不是有类似 7 天开发一个监控平台这样的教程文章，它不行吗？不行！虽然里面提到一些方法步骤，但如何与公司现有前端性能基建对接，性能平台上包含哪些东西，需要对哪些内容做预警，应该设定什么样的预警策略，等等，这些关键问题并没有任何资料提及。</p> <h3 id="第三个难点-实践中有许多坑-别人并不会公开分享"><a href="#第三个难点-实践中有许多坑-别人并不会公开分享" class="header-anchor">#</a> 第三个难点：实践中有许多坑，别人并不会公开分享</h3> <p>前端指标的制定、采集和上报，你在网上会看到一些资料，比如行业会议上阿里巴巴分享的采集方案，但是实践过程中，会有各种各样的坑，这个坑别人是不会分享的。</p> <p>比如说，有一个搜索页面，用户在页面还没加载完成的时候，发起了搜索。这时候，你会发现采集到的首屏时间比实际的要长很多。又比如，采集到的异常数据该怎么处理，上报策略怎么设定，这些需要多次趟坑才能了解到。</p> <h3 id="第四个难点-性能优化立项沟通"><a href="#第四个难点-性能优化立项沟通" class="header-anchor">#</a> 第四个难点：性能优化立项沟通</h3> <p>性能优化中的立项是个难题，如何从业务的角度来思考性能优化的价值，并说服业务去发起这个项目，这中间有很多的方法。但这些方法你很难通过自己短期思考去获得，而在市面上也很难找到这样的知识。</p> <p>比如立项正推和反推。所谓正推，就是性能线索 -&gt; 性能问题 -&gt; 性能优化方案 -&gt; 性能收益 ，根据这个思路来开展立项沟通；反推是预估需要的性能收益 -&gt; 性能优化方案 -&gt; 性能问题 -&gt; 性能线索，以此来确定立项。</p> <h2 id="性能优化体系"><a href="#性能优化体系" class="header-anchor">#</a> 性能优化体系</h2> <p>它主要包括三部分：性能优化流程、性能指标采集及上报、性能监控预警平台。</p> <p><img src="/performance/system.png" alt="system"></p> <h3 id="第一部分-性能优化流程"><a href="#第一部分-性能优化流程" class="header-anchor">#</a> 第一部分，性能优化流程</h3> <p>对应图中灰色部分，主要包括性能指标设定、性能标准确定、收益评估、诊断清单、优化手段、性能立项、性能实践。</p> <p>其中，性能指标设定，说的是我们要选择什么样的指标。比如页面打开慢，我们想要优化它，该从哪些地方入手，优化完后怎么知道问题解决了？这些就需要明确的指标来衡量。</p> <p>在设定指标之后，接下就是确定性能标准。也就是我们性能优化目标是怎样的，优化到什么程度合适。例如，我们要优化 App 里面的 H5 页面打开速度，确定的指标是秒开率，那一秒内可以打开的请求比例就是它的性能标准。</p> <p>如果仅仅判断性能指标是否优化到位还好，但很多时候，为了让产品同学感觉我们是为产品服务，而不是又在造轮子，我们还需要关联产品目标进行收益评估。比如，列表页到详情页的转化率能不能提升？用户跳出率可不可降低？</p> <p>接下来，我们就可以把业务代码接入性能监控预警平台，根据性能标准给出诊断清单。假如诊断出性能问题，我们就可以结合性能标准和诊断清单，确定相应的优化手段。</p> <p>接着该落地实践了吗？不。还要有个性能项目立项。不要小视了这个环节哦，这是你赢得产品经理、后端同事支持，让优化顺利执行下去不可或缺的内容。许多人就是忽略了这一点，导致优化迟迟无法落地。</p> <p>最后是性能实践，即经过优化之后发起项目上线，并跟踪进行效果评估，结合场景把这些项目成果以文档或代码的形式沉淀下来，给后来者使用参考。</p> <p>不要小看这个沉淀文档的重要性，攻城不易，守城更难，制订优化实践，确保新人也可以执行，是优化成果得以长期保持的必要保障。比如之前有个同事通过懒加载解决了滚动列表下拉慢的问题，后来的新同事再遇到同样问题，就可以通过查看这个文档快速解决。</p> <h3 id="第二部分-性能指标采集与上报"><a href="#第二部分-性能指标采集与上报" class="header-anchor">#</a> 第二部分，性能指标采集与上报</h3> <p>对应着图中紫色部分，它的主要内容是把前面提到的性能指标以代码的形式分解落地，确保可以采集，然后在 SDK 封装后集合统计埋点，最后根据实际情况，制定上报策略。</p> <p>在上报之前，我们还需要注意将一些“脏数据”（也就是明显异常的数据）丢弃掉，避免占用用户网络带宽。</p> <h3 id="第三部分-性能监控预警平台"><a href="#第三部分-性能监控预警平台" class="header-anchor">#</a> 第三部分，性能监控预警平台</h3> <p>对应图中橙色部分，主要是通过分析上一步采集到的性能数据，再对比性能标准进行监控。当指标超过某一监控阈值时，性能监控预警平台会通过邮件或者短信，给我们发送预警信息。</p> <p>在构造上，性能监控预警平台包括：性能数据处理后台和性能可视化展现前台两部分。</p> <p>其中，性能数据处理后台，主要是在性能采集数据上报到性能平台后，对数据进行预处理、数据清洗和数据计算，然后生成前台可视化所需数据。</p> <p>性能可视化展现前台包括性能展示、性能监控预警，主要是对核心数据指标进行可视化展现，对性能数据波动进行监控，对超出阈值的数据给出短信或邮件报警。
如何设定性能关键指标？
这里，我也分两部分来介绍，一个是关注什么样的指标，一个是关键指标的设定及标准。</p> <h2 id="什么样的指标值得我们关注"><a href="#什么样的指标值得我们关注" class="header-anchor">#</a> 什么样的指标值得我们关注？</h2> <p>根据我的经验和业界情况，要确定关键的性能指标，必须满足两点：</p> <ul><li><p>可衡量，就是可以通过代码来度量；</p></li> <li><p>关注以用户为中心的关键结果和真实体验。</p></li></ul> <p>第一点好理解，无法衡量就无法优化，而第二点说的“关键结果和真实体验”是什么意思呢？</p> <p>所谓关键结果，就是用户真正关心什么。举例来说，当用户进入商品详情页面，他关心的是这个商品怎么样，什么价格，具体到页面上就是商品描述、商品头图、商品价格和购买按钮这些关键信息。我们要保证无论什么情况下都能让用户看到这些信息。</p> <p>而真实体验，就是用户使用产品的感受。比如当用户进入列表页，在滑动过程中，页面加载突然跳出一个弹窗，他会不会觉得烦？这就是一种真实体验。</p> <p>所以，基于这两点，在性能指标方面，我选定加载、交互性和视觉稳定性这三个方向，来带你一起了解性能指标及其标准设定。</p> <h3 id="性能优化关键指标设定及标准"><a href="#性能优化关键指标设定及标准" class="header-anchor">#</a> 性能优化关键指标设定及标准</h3> <p>所谓加载，就是进入页面时，页面内容的载入过程。比如，当你打开一些网站时，你会发现，有的网站首页上的文字、图片出现很缓慢，而有的则很快，这个内容出现的过程就是加载。加载缓慢严重消耗用户的耐心，会让用户离开页面。</p> <p>所谓交互，就是用户点击网站或 App 的某个功能，页面给出的回应。比如我们点击了一个“点赞”按钮，立刻给出了点赞数加一的展示，这就是交互体验好，反之如果很长时间都没回应，这就是交互体验不好。</p> <p>视觉稳定性指标，我们叫它 CLS（Cumulative Layout Shift），也就是布局偏移量，它是指页面从一帧切换到另外一帧时，视线中不稳定元素的偏移情况。</p> <p>比如，你想要购买的商品正在参加抢购活动，而且时间快要到了。在你正要点击页面链接购买的时候，原来的位置插入了一条 9.9 元包邮的商品广告。结果会怎样？你点成了那个广告商品。如果等你再返回购买的时候，你心仪商品的抢购活动结束了，你是不是很气？所以，CLS也非常重要。</p> <p>在性能优化关键指标方面，目前业界主要集中在加载方面，特别是白屏时间和首屏时间。它们直接和用户体验相关，且相关的衡量标准已经达成共识。在采集方式上，除了手动采集之外，还可以自动化采集。而交互性和视觉稳定性关键指标，业界还在探索，没有统一的衡量标准，且必须手动采集。</p> <p>比如交互方面，有的公司用 FID 指标 （First Input Delay，首次输入延迟）， 指标必须尽量小于 100ms，如果过长会给人页面卡顿的感觉。还有的公司使用 PSI（Perceptual Speed Index，视觉变化率），衡量标准是小于20%。</p> <p>而视觉稳定性指标CLS 比较前沿，2020 年 5 月 Google 公司才发布了一篇文章关于 CLS 指标定义及相关介绍的文章。它的采集方法，除了依赖 Google 的 Lighthouse 做本地采集，目前还没有好的方案。在应用上，其他公司或者沿用 Google 的或者很少使用。</p> <p>因为这两个方向还没统一的标准，我们也在实验，就不赘述了，接下来我就重点介绍这目前已经确定的加载关键指标，具体就是白屏时间和首屏时间的设定及其标准。</p> <p>什么叫白屏时间呢？它指的是从输入内容回车（包括刷新、跳转等方式）后，到页面开始出现第一个字符的时间。这个过程包括 DNS 查询，建立 TCP 连接，发送首个HTTP请求（如果使用HTTPS还要介入 TLS 的验证时间），返回HTML文档，HTML文档 Head 解析完毕。它的标准时间是 300ms。</p> <p>如果白屏时间过长，用户会认为我们的页面不可用，或者可用性差。如果超过一定时间（如 1s），用户注意力就会转移到其他页面。</p> <p>哪些因素会导致白屏时间过长？原因有很多，有可能是 DNS 查询时间长，建立 TCP 请求链接太慢，或者是服务器处理请求速度太慢，客户端下载、解析、渲染时长过长，没有做 Gzip 压缩，缺乏本地离线化处理，等等。</p> <p>接下来我们看首屏时间，它是怎么计算的？</p> <p>首屏时间=白屏时间+渲染时间。它是指从浏览器输入地址并回车后，到首屏内容渲染完毕的时间。这期间不需要滚动鼠标或者下拉页面，否则无效。</p> <p>怎么理解呢？我们来看，下面是网站速度和性能优化 GTmetrix 官网的一个首屏时间示意图。从开始加载到第二帧时，这段时间是白屏时间，到第三帧时，首屏才开始加载，到第四帧结束时，这段时间是首屏时间。</p> <p><img src="/performance/Drawing_1.png" alt="Drawing1.png"></p> <h3 id="首屏时间"><a href="#首屏时间" class="header-anchor">#</a> 首屏时间</h3> <p>在加载性能指标方面，相比于白屏时间，首屏时间更重要。为什么？</p> <p>从重要性角度看，打开页面后，第一眼看到的内容一般都非常关键，比如电商的头图、商品价格、购买按钮等。这些内容即便在最恶劣的网络环境下，我们也要确保用户能看得到。</p> <p>从体验完整性角度看，进入页面后先是白屏，随着第一个字符加载，到首屏内容显示结束，我们才会认为加载完毕，用户可以使用了。</p> <p>白屏加载完成后，仅仅意味着页面内容开始加载，但我们还是没法完成诸如下单购买等实际操作，首屏时间结束后则可以。</p> <p>首屏时间的标准，最初只是根据这个页面对时间是否敏感来判定，主要以用户平均首屏加载时间来计算，并没有详细区分 2G/3G/4G/WiFi 这些网络环境。比如，下图是我 2011 年在百度文库做性能优化项目时，跟团队定的性能标准。</p> <p><img src="/performance/Drawing_2.png" alt="Drawing2.png"></p> <h3 id="白屏首屏早期标准"><a href="#白屏首屏早期标准" class="header-anchor">#</a> 白屏首屏早期标准</h3> <p>如果一个站点对时间敏感，首屏时间在 1s 内，用户感觉会很快；如果首屏时间超过 2.5s，用户就会感觉很慢。但是在 1s 内打开页面，人们对这么短的时间并不敏感，体验不出 10ms 和 50ms 有什么差别。</p> <p>但当到了 2G/3G 弱网环境，或者网络不稳定的环境（如坐火车或乘飞机时），用户联网加载的时间会特别长，严重影响整体指标。就好像 100 个穷人和马云一起，看平均资产差不多每人 5 个亿，但实际上多数人并没有那么多钱。性能也如此，前端工程师在使用过程中，越来越觉得用平均值来表示加载时间并不准确可靠。</p> <p>于是，人们又开始采用中位数，做正态分布，看分位值统计。在对首屏时间进行数据分析和可视化展现时，经常用到的是 P50（50分位值）、P90（90分位值）、P99（99分位值）。它们是怎么得出的呢？以 P99 为例，我们是把所有首屏时间排序，得出排在第 99 位的首屏时间就是 P99。</p> <p>不过这样处理起来还是比较麻烦，后来为了计算简单，也便于理解，我们引入了秒开率的指标，即 1s 内打开用户的占比。这个概念最早来自阿里巴巴，后来被业界普遍采用。</p> <p>下面是我在带领团队做 App 性能优化项目时，按照秒开率建立的首屏时间标准。</p> <p><img src="/performance/Drawing_3.png" alt="Drawing3.png"></p> <h3 id="首屏时间秒开率标准"><a href="#首屏时间秒开率标准" class="header-anchor">#</a> 首屏时间秒开率标准</h3> <p>可以说，性能指标和标准建立到这里，已经 OK了，业界能做到这一点的公司屈指可数。</p> <p>但还有一个问题，首屏时间毕竟粒度太粗了，如果首屏时间长，白屏时间短，到底是哪里的问题？是数据接口的问题，还是页面渲染问题？所以我们还必须把这个指标进一步拆解细化。</p> <p>首屏时间可以拆分为白屏时间、数据接口响应时间、图片加载资源等。 白屏时间前面已经提到了，数据接口响应时间可以直接从后端服务中获取，不需要前端再重复计算，我们只需取完放在性能平台即可。最后的图片资源需要我们单独采集。</p> <p>以上就是前端性能体系中的关键指标，还有一些不太重要的指标，如卡顿、完全加载时间、资源加载时间等。</p> <h2 id="web-前端都有哪些性能瓶颈点"><a href="#web-前端都有哪些性能瓶颈点" class="header-anchor">#</a> Web 前端都有哪些性能瓶颈点</h2> <p>在浏览器输入 URL 并回车后，为了把 URL 解析为 IP 地址，浏览器会向 DNS 服务器发起 DNS 查询，获取 IP 地址。然后浏览器通过 IP 地址找到目标服务器，发起 TCP 三次握手和 TLS 协商，从而建立起 TCP 连接。</p> <p>在建立连接后，浏览器就可以发起 HTTP 请求，而服务端接收到后，对请求进行响应。浏览器从响应结果中拿到数据，并进行解析和渲染，最后在用户面前就出现了一个网页。</p> <p>以上的整个过程大致可以分为三个阶段：客户端发起请求阶段、服务端数据处理请求阶段、客户端页面渲染阶段。</p> <h3 id="客户端请求阶段的瓶颈点"><a href="#客户端请求阶段的瓶颈点" class="header-anchor">#</a> 客户端请求阶段的瓶颈点</h3> <p>客户端发起请求阶段，是指用户在浏览器输入 URL，经过本地缓存确认是否已经存在这个网站，如果没有，接着会由 DNS 查询从域名服务器获取这个 IP 地址，接下来就是客户端通过 TCP 的三次握手和TLS协商向服务器发起 HTTP 请求建立连接的过程。</p> <p>在这个过程中，本地缓存、DNS查询、HTTP 请求很容易成为影响前端性能的瓶颈点。</p> <h4 id="本地缓存"><a href="#本地缓存" class="header-anchor">#</a> 本地缓存</h4> <p>为什么说本地缓存会成为前端性能的瓶颈点之一呢？</p> <p>我们知道，本地缓存可以让静态资源加载更快，当客户端发起一个请求时，静态资源可以直接从客户端中获取，不需要再向服务器请求。而想要让本地缓存发挥这个作用，就需要先在服务器上进行配置。</p> <p>但在实际当中，许多前端同学往往会忽视这点。这会出现一个什么情况呢？</p> <p>以 58 同城的列表页项目为例，在客户端请求阶段，DNS 查询时间大概是 385 ms，TCP 三次握手及 TLS 协商时间 436 ms，数据返回 412 ms。一个请求下来大约是 1233 ms，这还是强网（WIFI/4G）情况下。如果是弱网（3G/2G）情况，一个请求连接都需要 2s 。但使用缓存的话，几乎可以说是几毫秒内完成请求，对比非常明显。</p> <p>怎么实现本地缓存呢？</p> <p>本地缓存一般包括强缓存和协商缓存两种形式。</p> <p>强缓存是指浏览器在加载资源时，根据请求头的 expires 和 cache-control 判断是否命中客户端缓存。如果命中，则直接从缓存读取资源，不会发请求到服务器，反之还需要走完整的资源请求流程。</p> <p>协商缓存是指，浏览器会先发送一个请求到服务器，通过 last-modified 和 etag 验证资源是否命中客户端缓存。如果命中，服务器会将这个请求返回，但不会返回这个资源的数据，依然是从缓存中读取资源。 如果没有命中，无论是资源过期或者没有相关资源，都需要向服务器发起请求，等待服务器返回这个资源。</p> <h4 id="dns-查询"><a href="#dns-查询" class="header-anchor">#</a> DNS 查询</h4> <p>DNS 之所以会成为前端性能瓶颈点，是因为每进行一次 DNS 查询，都要经历从手机到移动信号塔，再到认证 DNS 服务器的过程。这中间需要很长的时间。但用户是不想等待的。</p> <p>想要节省时间，一个办法就是让 DNS 查询走缓存。幸好浏览器提供了 DNS 预获取的接口，我们可以在打开浏览器或者 WebView 的同时就进行配置。这样真正请求时，DNS 域名解析可以检查一下浏览器缓存，一旦缓存命中，就不需要去 DNS 服务器查询了。</p> <h4 id="http-请求"><a href="#http-请求" class="header-anchor">#</a> HTTP 请求</h4> <p>在 HTTP 请求阶段，最大的瓶颈点来源于请求阻塞。所谓请求阻塞，就是浏览器为保证访问速度，会默认对同一域下的资源保持一定的连接数，请求过多就会进行阻塞。</p> <p>那么，浏览器同域名的连接数限制是多少呢？一般是 6 个。如果当前请求书多于 6 个，只能 6 个并发，其余的得等最先返回的请求后，才能做下一次请求。</p> <p>所以我们在项目之初，做一些域名规划很重要。我们可以先看看当前页面需要用到哪些域名，最关键的首屏中需要用到哪些域名，规划一下这些域名发送的顺序。</p> <p>除了域名规划，为了解决同域名下的阻塞问题，还可以做域名散列，通过不同的域名，增加请求并行连接数。常见做法是，将静态服务器地址 pic.google.com，做成支持 pic0-5 的 6 个域名，每次请求时随机选一个域名地址进行请求。因为有 6 个域名同时可用，最多可以并行 36 个连接。当然，这个域名个数不是越多越好，太分散的话，又会涉及多域名之间无法缓存的问题。</p> <h3 id="服务端数据处理阶段的瓶颈点"><a href="#服务端数据处理阶段的瓶颈点" class="header-anchor">#</a> 服务端数据处理阶段的瓶颈点</h3> <p>服务端数据处理阶段，是指 WebServer 接收到请求后，从数据存储层取到数据，再返回给前端的过程。</p> <p>具体来说，服务端程序接收到 HTTP 请求后，会做一些请求参数处理以及权限校验。校验完成后，它会将请求参数发送到数据存储服务。然后服务端程序会从数据存储中取到数据，进行数据加工聚合处理，最后再通过 jsonp 或者 ajax 接口返回给前端。</p> <p>这个过程中的瓶颈点，就在于是否做了数据缓存处理、是否做了 Gip 压缩，以及是否有重定向。</p> <p>其中，Gzip 压缩是一种压缩技术，服务器端通过使用 Gzip，传输到浏览器端的文本类资源（有别于图片等二进制等资源）的大小可以变为原来的 1/3 左右。因此通过 Gzip 压缩，资源的下载速度会快很多，能大大提升页面的展示速度。</p> <p>因为多数情况下，运维团队都会默认开启 Gzip 压缩，所以在这里我就不展开介绍了，接下来我会重点介绍一下数据缓存和重定向，这两个瓶颈点。</p> <h4 id="数据缓存"><a href="#数据缓存" class="header-anchor">#</a> 数据缓存</h4> <p>数据缓存分为两种：借助 Service Worker 的数据接口缓存、借助本地存储的接口缓存和CDN（Content Delivery Network，内容分发网络）</p> <p>其中 Service Worker 是浏览器的一个高级属性，本质上是一个请求代理层，它存在的目的就是拦截和处理网络数据请求。如果没有 Service Worker，请求每次直接落到 WebServer 上，需要走一次后端数据存取链路的流程，这会延长页面打开时间。</p> <p>借助本次存储的接口缓存是指，在一些对数据时效性要求不高的页面，第一次请求到数据后，程序将数据存储到本地存储（store 或者 localStorage、甚至客户端本身的存储），下一次请求的时候，先去缓存里面取将取数据，如果没有的话，再向服务器发起请求。</p> <p>所谓 CDN，它的基本思路是，通过在网络各处放置节点服务器，构造一个智能虚拟网络，将用户的请求导向离用户最近的服务节点上</p> <p>比如，一个深圳的用户想要访问京东电商首图的资源，如果没有使用 CDN ，图片服务器有可能在北京。但如果使用了CDN 的话，因为 CDN 的节点遍布全国，它就可以选择距离深圳最近的节点返回首图数据。</p> <p>为什么数据缓存会成为性能瓶颈点呢？这是因为每请求一次数据接口，需要从客户端到后端服务器，再到更后端的数据存储层，一层一层返回数据，最后再给到客户端，耗时很长，如果能够减少一次这个请求，为首屏时间争取了宝贵的时间。</p> <h4 id="重定向"><a href="#重定向" class="header-anchor">#</a> 重定向</h4> <p>前面我们介绍了数据缓存是如何影响性能的，接下来我们聊一下另外一个瓶颈点——页面重定向。</p> <p>所谓重定向，是指网站资源（如表单，整个站点等）迁移到其他位置后，用户访问站点时，程序自动将用户请求从一个页面转移到另外一个页面的过程。</p> <p>在服务端处理阶段，重定向分为三类：服务端发挥的302重定向，META 标签实现的重定向和前端 Javasript 通过window.location 实现的重定向。</p> <p>它们都会引发新的 DNS 查询，导致新的 TCP 三次握手和 TLS 协商，以及产生新的 HTTP 请求。而这些都会导致请求过程中更多的时间，进而影响前端性能。所以重定向也是一个需要注意的性能瓶颈点，在优化的时候需要注意。</p> <h3 id="页面解析和渲染阶段的瓶颈点"><a href="#页面解析和渲染阶段的瓶颈点" class="header-anchor">#</a> 页面解析和渲染阶段的瓶颈点</h3> <p>在页面加载过程中，当前服务端对数据加工聚合处理后，客户端拿到数据，接下来就会进入解析和渲染阶段。</p> <p>所谓解析，就是 HTML 解析器把页面内容转换为 DOM 树和 CSSOM树的过程。</p> <p>什么叫 DOM 树呢？DOM 树全称为 Document Object Model 即文档对象模型，它描述了标签之间的层次和结构。HTML 解析器通过词法分析获得开始和结束标签，生成相应的节点和创建节点之间的父子关系结构，直到完成 DOM 树的创建。</p> <p>而 CSSOM 树，即 CSS 对象模型。主要描述样式集的层次和结构，HTML 解析器遇到内联的 style 标签时，会触发 CSS 解析器对样式内容进行解析，与上面解析器解析 HTML 过程类似，CSS 解析器遍历其中每个规则，将 CSS 规则解析浏览器可解析和处理的样式集合，最终结合浏览器里面的默认样式，汇总形成具有父子关系的 CSSOM 树。</p> <p>解析完后就是渲染。主线程会计算 DOM 节点的最终样式，生成布局树。布局树会记录参与页面布局的节点和样式。完成布局后，紧跟着就是绘制。绘制就是把各个节点绘制到屏幕上的过程，绘制结果以层的方式保存。当文档中各个部分以不同的层绘制时，相互重叠时，就必须进行合成，以确保他们可以以正确的顺序绘制和展示。</p> <p>以上就是解析和渲染阶段，这个阶段流程环节多，逻辑复杂，瓶颈点也多，比如，DOM 树构建过程，CSSOM 树生成阶段，重排和重绘过程等。但因为篇幅所限，在这里我会重点介绍一下 DOM 树构建和布局两个环节的瓶颈点。</p> <h4 id="构建-dom-树的瓶颈点"><a href="#构建-dom-树的瓶颈点" class="header-anchor">#</a> 构建 DOM 树的瓶颈点</h4> <p>解析器构建 DOM 树的过程中，有三点会严重影响前端性能。</p> <p>一个是当 HTML 标签不满足 Web 语义化时，浏览器就需要更多时间去解析 DOM 标签的含义。特别解析器是对标签的容错，比如将 <code>&lt;br&gt;</code> 写成了<code>&lt;/br&gt;</code>，又或者表格嵌套不标准，标签层次结构复杂等。遇到这些情况时，浏览器会进行语法纠错。这就会导致页面总的解析和渲染阶段需要更长的时间，严重影响页面展示性能。</p> <p>另一个是 DOM 节点的数量越多，构建 DOM 树的时间就会变长，进而延长解析时间，拖慢页面展示速度。</p> <p>最后一个是文档中包含<code>&lt;SCRIPT&gt;</code> 标签时的情况。因为无论是 DOM 或者 CSSOM 都可以被 JavaScript 所访问并修改，所以一旦在页面解析时遇到 <code>&lt;SCRIPT&gt;</code> 标签，DOM 的构造过程就会暂停，等待服务器请求脚本。在脚本加载完成后，还要等取回所有的 CSS 及完成 CSSOM 之后才继续执行。</p> <p>这个过程中用户看到的是白色的屏幕。因此外部<code>&lt;SCRIPT&gt;</code> 常被称为“解析”阶段的拦路虎。有时就因为解析过程中多了一个 <code>&lt;SCRIPT&gt;</code>，造成页面解析阶段从 200ms 变为 1s。</p> <p>所以，外部脚本的加载时机一定要确定好，能够延迟加载就选用延迟加载。另外，我们可以通过使用 defer 和 async，告诉浏览器在等待脚本下载期间不阻止解析过程，这样做可以明显提升性能。</p> <h4 id="布局中的瓶颈点"><a href="#布局中的瓶颈点" class="header-anchor">#</a> 布局中的瓶颈点</h4> <p>在布局阶段，浏览器会根据样式解析器给出的样式规则，来计算某个元素需要占据的空间大小和屏幕中的位置（比如电商详情页一张 banner图片的高度、宽度和位置），借助结算结果，来进行布局。而主线程布局时，使用的是流模型的布局方式。所谓流模型，就是像水流一样，需要从左到右，从上到下遍历一遍所有元素。</p> <p>假设我们在页面渲染过程运行时修改了一个元素的属性，比如在电商的商品详情页加入一条广告数据。这时布局阶段受到了影响。浏览器必须检查所有其他区域的元素，然后自动重排页面，受到影响的元素需要重新绘制，最后还得合成，相当于整个渲染流程再来了一遍。</p> <p>除此之外，因为浏览器每次布局计算都要作用于整个 DOM，如果元素量大，计算出所有元素的位置和尺寸会花很长的时间。所以布局阶段很容易成为性能瓶颈点。</p> <p>说一个我之前实际工作中遇到的布局问题。在做 58 列表页性能优化项目时，我们一开始布局的时候，并没有确定列表页图片的初始大小，只给定了一个基础的占位尺寸。这就导致了，当图片加载完毕后，主线程才知道了图片的大小，不得不重新进行布局计算，然后再次进行页面渲染，也就是重排或重绘，无疑这大大延长了页面展示时间。</p> <p>小结</p> <p><img src="/performance/web_url_load.png" alt="小结1"></p> <h2 id="案例分析"><a href="#案例分析" class="header-anchor">#</a> 案例分析</h2> <h3 id="性能立项"><a href="#性能立项" class="header-anchor">#</a> 性能立项</h3> <p>性能立项就是通过成立一个项目组，用项目化的运作方式来解决性能问题。整个立项流程包括团队成员确定、技术调研开展、项目目标制定、获取业务侧支持、项目名字选定，需求范围和优先级确定等过程。</p> <p>不知道你有没有发现，这个立项不是先定需求范围和优先级，然后再制定项目目标和成立项目团队。为什么呢？</p> <p>因为这个性能优化项目，是探索性的项目需求。</p> <p>探索性项目需求，有别于日常的业务项目。业务项目一般都有明确的项目目标和需求修改范围。比如，修改首页金刚位模块，提升首页到列表页的转户率。这个项目，需求文档和 UI 图会给出具体模块修改点、样式、内容等，前端开发完成后，产品和 UI 进行验收即可。而探索性项目需求，目标不确定，一般需要先选定项目团队，做完技术调研，才能确定出项目目标。</p> <p>因为探索性项目需求中的项目目标制定、获取业务侧支持、项目立项时机这三点和常规项目不太一样，下面我就为你重点介绍一下。</p> <h4 id="项目目标制定"><a href="#项目目标制定" class="header-anchor">#</a> 项目目标制定</h4> <p>性能项目的目标制定是一个正推和反推结合的过程。</p> <p>正推是指，从线索 -&gt; 本质或痛点问题 -&gt; 解决方案 -&gt; 目标。我们寻找到项目线索，找到性能具体问题，试验了解决方案，得到一个结果。</p> <p>这个项目中，最终项目首屏时间可以减少 10%，对应 VPPV 可以提升 3%。但是我判断，3%的收入提升这个结果对公司来说，吸引力不够，因为平时波动都有 2%，要达成一个“性感”的目标，至少需要提升 10%的收入提升。</p> <p>什么叫 VPPV 呢？VPPV 就是详情页的 UV 除以列表页的 PV，这个指标和最终收入正相关，通俗一点来说就是，来店里的用户中，有多少最后买了东西。为了方便介绍，这里我省去了VPPV 到广告收入的转化过程，用 VPPV 代替收益。</p> <p>那么，怎么实现 10% 的收入提升呢？这时候就需要反推的过程。</p> <p>什么叫反推呢？这是它的过程：从目标-&gt;解决方案-&gt;本质或痛点-&gt;线索。想要 10% 的收入提升（VPPV），至少需要 30% 的性能提升，对应的方案、问题痛点、性能线索都要能支持这个结果。</p> <p>最后，我把正推和反推结合起来就能得出一个目标，即通过性能提升 30%，实现收入提升 10%。</p> <h3 id="获取业务侧支持"><a href="#获取业务侧支持" class="header-anchor">#</a> 获取业务侧支持</h3> <p>项目目标制定完，接下来就是如何说服业务侧支持这个项目。因为前端团队一般都投入在各个业务方向，要做性能优化，就需要说服业务将部分前端资源投到这个性能优化项目上来。</p> <p>此时，为了评估值不值得花时间在这上面，前端同学会和你提到项目收益，比如，他会问，加载时间提升了多少，可以学习新技术 react hook，vue3等。</p> <p>一般业务同事想到项目收益，通常是流量增加多少、转化率提升多少，跳失率降低多少等。要想让对方理解性能优化项目的收益，我们就要了解业务的关注点，从业务的角度去思考，去回答。</p> <p>以这个项目为例，我们给项目起了名字叫奥林匹亚项目，更高更快更强的意思。</p> <p>有关它的预期收益，我们最初想的是，通过请求资源优化，将首屏时间提升 30%。后来为了让业务同事更直观理解项目收益，我们就把目标修改成了“通过性能提升 30%，提升页面 VPPV 10%”。</p> <p>业务看到后面一个目标很有共鸣，觉得我们不是为了自己做一个技术项目，而是实实在在想提升业务体验，帮助达成业务收入指标。</p> <h4 id="立项时机"><a href="#立项时机" class="header-anchor">#</a> 立项时机</h4> <p>看到这个小标题，你可能要问了，什么时候立项合适，这有什么讲的呀，不是项目之初就开始立项吗？</p> <p>对此，我的理解是，一定要先做好技术可行性调研，性能优化是横向项目，会涉及多个业务，最好在试点两个业务后，再正式立项。否则，会出现你用了一个列表页筛选优化的方案，适合 A 业务场景，却不适合 B 业务场景的问题。</p> <p>做完这些后，我们就可以正式开始立项了。以下是我们的立项信息。</p> <p>投入资源：前端 FE10 人，后端RD 4 人，UI设计 4 人，测试 2 人。
投入价值：20 人，2 个月，40 人月，约 XXw。
收获价值：访问量，VPPV 提升 10%，订单提升 8%，约 XXX 万美金/季度。</p> <p>立项完成后，接下来我们就可以去找性能线索，有针对性地去优化。此时，就需要依赖于性能监控预警平台。</p> <p>当时我们一开始也想过从 0 到 1 完整做一个性能监控平台，但因为时间和人力关系，只能作罢。最后，我们直接选取了一个运维同事已经在用的一个开源展示平台，来做数据展示，至于具体的数据指标定义和采集，就需要我们自己来做了。</p> <h3 id="性能诊断优化"><a href="#性能诊断优化" class="header-anchor">#</a> 性能诊断优化</h3> <p>有了性能监控平台，也有了性能数据，接下来就是结合页面加载过程，进行性能问题诊断和优化了。</p> <p>页面加载的性能瓶颈点在上一讲我已经介绍过了，在这里就不多说了。当时我们主要是通过本地缓存方案来减少客户端请求数，同时让运维同事对静态资源配置了合理的过期时间，实现静态资源的强缓存方案。另外还对页面做了 DNS 预解析处理，也对一些广告和帮帮页（58 同城的 WebIM 应用，用于用户的咨询使用）做了懒加载。</p> <p>为了确保页面解析不会中断，我们还对列表页的加载资源做了处理，也制定了 CSS 相关的规范，确保嵌套层次更少，让规则解析更简单。原先列表页的筛选功能使用的是同步技术，每次完成筛选，整个页面都需要重新加载一次，这一次我们把它修改成了 SPA 单页面应用，每次筛选后，只请求数据接口即可，不用整个页面都请求。</p> <p>现在回过头来看，列表页改成单页面应用的方案，对我们最终 VPPV 的提升贡献最大，且在当时的情况下，属于比较前沿的解决方案。而弱网下的性能优化，当时我们花了很长时间才发现问题原因，它是当时的一个难点，也是前端优化中的盲区。所以，接下来我向你重点介绍一下这两个。</p> <h4 id="列表页改单页面应用"><a href="#列表页改单页面应用" class="header-anchor">#</a> 列表页改单页面应用</h4> <p>列表页主要用来展示分类下的列表信息，根据用户的筛选项，将搜索结果展示给用户。</p> <p>把列表页改成单页面，面临的第一个难题就是 VUE/React 还处于早期阶段，贸然给业务同事使用，会趟不少坑。还有就是，这些页面都在搜索引擎和其他 App 做了广告投放，需要考虑 SEO， 也就是说，URL 要和原来的页面保持一致的同时，支持爬虫够抓取和解析。</p> <p>我调研过程中发现，与直接切换 VUE/React 技术栈相比，现有的列表页模板修改成单页面应用，风险上要小很多，所以最终采用的是列表页模板的单页面实现。</p> <p>另外我还发现，浏览器的 History API 方案刚好能够支持单页面应用和原页面URL保持一致。具体来说，通过其中的 pushState 修改 URL 和历史记录，能确保筛选后的 URL 和原来保持一致，通过它的回退等功能操作，也可以回到上一个页面。</p> <p>对于SEO这块儿，为了确保爬虫能够抓取解析这个页面，如果页面逻辑和数据展现是通过JavaScript 动态获取加载数据，那么爬虫就无法解析抓取到的页面。为此，我额外提供了一套服务端模板，如果页面访问头是爬虫的话，就走服务端模板，反之如果是个人用户的话，就走单页面应用。</p> <h4 id="弱网下性能优化"><a href="#弱网下性能优化" class="header-anchor">#</a> 弱网下性能优化</h4> <p>当时上线前夕刚好遇到招聘业务，最后发现数据并不及预期，怎么回事呢？我们怎么测试都没发现问题，后来在家里 2G 网络下测试了一下，发现白屏了。问题是不是出在这里呢？</p> <p>接下来，我就针对用户网络分布做了网络测速，网络测速过程中，发现我们的弱网（2G、 3G）用户超过 50%。</p> <p>于是，接下来我们就针对弱网环境做了以下优化手段。</p> <p>因为弱网下一个请求都需要 2s，而原来的列表页数据接口请求大约26个请求，于是我们就尽可能合并请求，最后合并到了 11个。</p> <p>小图标采用 Base64 Encoding 的方式，内嵌于页面中，不用额外发网络请求来获取。</p> <p>针对弱网（特别是移动网络），不自动加载图片，只显示本占位图。</p> <p>通过以上优化方式后，首屏时间从 2.5s 提升到 1.5s。</p> <p>最后，还有一个教训就是，如果性能优化涉及多条业务线，最好是先把一条业务打透，确保收入数据确实提升了，再推广到其他业务。</p> <p>当时我们的性能优化涉及五条业务线：二手，房产，招聘，黄页，二手车。我在做优化的时候同时选了招聘和房产业务，结果因为一个问题，业务收入没有如预期的那样提升 10%，而是直接降低了 20%，并且是两条业务数据一起降，业务部门对此意见很大。</p> <p>我印象中每天晚上 12 点计算出统计数据后，发一封邮件告诉业务同学和老板，今天的数据是利好还是利空。如果是利空，还需要顶着业务同学压力，通过性能优化，把收入数据优化提升上去，这个过程中非常艰难。</p> <p>小结</p> <p><img src="/performance/mobile_case.png" alt="小结2"></p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/zhouyalongs/zhouyalongs.github.io/edit/master/docs/03.前端延展/02.性能优化/01.概述.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/Bloging/tags/?tag=%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%A6%82%E8%BF%B0" title="标签">#性能优化概述</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/08/09, 10:45:15</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/Bloging/pages/c926f9/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">微信认证</div></a> <a href="/Bloging/pages/e4ecdb/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">指标采集</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Bloging/pages/c926f9/" class="prev">微信认证</a></span> <span class="next"><a href="/Bloging/pages/e4ecdb/">指标采集</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/Bloging/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/Bloging/pages/640b08/"><div>map&amp;set</div></a> <span>01-29</span></dt></dl><dl><dd>02</dd> <dt><a href="/Bloging/pages/87ead3/"><div>方法论</div></a> <span>08-12</span></dt></dl><dl><dd>03</dd> <dt><a href="/Bloging/pages/0adf45/"><div>性能优化体系演进</div></a> <span>08-11</span></dt></dl> <dl><dd></dd> <dt><a href="/Bloging/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <!----> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">跟随系统</li><li class="iconfont icon-rijianmoshi">浅色模式</li><li class="iconfont icon-yejianmoshi">深色模式</li><li class="iconfont icon-yuedu">阅读模式</li></ul></div> <div title="选择主题色" class="button blur theme-mode-but iconfont icon-qiehuan"><ul class="select-box" style="display:none;"><li class="iconfont"><sub class="theme-select-block" style="background-color:#3eaf7c;"></sub> <span>生命绿</span></li><li class="iconfont"><sub class="theme-select-block" style="background-color:#D59C12;"></sub> <span>收获黄</span></li><li class="iconfont"><sub class="theme-select-block" style="background-color:#3498DB;"></sub> <span>天空蓝</span></li><li class="iconfont"><sub class="theme-select-block" style="background-color:#E74C3C;"></sub> <span>激情红</span></li><li class="iconfont"><sub class="theme-select-block" style="background-color:#8e44ad;"></sub> <span>高贵紫</span></li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/Bloging/assets/js/app.2aa6d5b3.js" defer></script><script src="/Bloging/assets/js/3.96531fce.js" defer></script><script src="/Bloging/assets/js/4.8451043b.js" defer></script><script src="/Bloging/assets/js/74.15075fcd.js" defer></script>
  </body>
</html>
