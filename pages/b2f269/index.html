<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>搭建平台 | you know nothing</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/Bloging/img/logo.png">
    <link rel="stylesheet" href="https://unpkg.com/mssui@0.1.13/lib/theme-chalk/index.css">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.min.js"></script>
    <script src="https://unpkg.com/mssui@0.1.17/lib/index.js"></script>
    <meta name="description" content="记录生活,点滴成长">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/Bloging/assets/css/0.styles.7e19c1e2.css" as="style"><link rel="preload" href="/Bloging/assets/js/app.2aa6d5b3.js" as="script"><link rel="preload" href="/Bloging/assets/js/3.96531fce.js" as="script"><link rel="preload" href="/Bloging/assets/js/4.8451043b.js" as="script"><link rel="preload" href="/Bloging/assets/js/76.4b6dec3b.js" as="script"><link rel="prefetch" href="/Bloging/assets/js/1.fc2f76d2.js"><link rel="prefetch" href="/Bloging/assets/js/10.8641cfba.js"><link rel="prefetch" href="/Bloging/assets/js/100.df77cb7e.js"><link rel="prefetch" href="/Bloging/assets/js/11.b2a25797.js"><link rel="prefetch" href="/Bloging/assets/js/12.8ebf8caa.js"><link rel="prefetch" href="/Bloging/assets/js/13.f8c25d16.js"><link rel="prefetch" href="/Bloging/assets/js/14.26f1cd6d.js"><link rel="prefetch" href="/Bloging/assets/js/15.4055abb9.js"><link rel="prefetch" href="/Bloging/assets/js/16.53024b04.js"><link rel="prefetch" href="/Bloging/assets/js/17.87929c73.js"><link rel="prefetch" href="/Bloging/assets/js/18.37f3a026.js"><link rel="prefetch" href="/Bloging/assets/js/19.b6301327.js"><link rel="prefetch" href="/Bloging/assets/js/20.308e81fb.js"><link rel="prefetch" href="/Bloging/assets/js/21.ae950520.js"><link rel="prefetch" href="/Bloging/assets/js/22.64e3f804.js"><link rel="prefetch" href="/Bloging/assets/js/23.7f06754b.js"><link rel="prefetch" href="/Bloging/assets/js/24.489e5b23.js"><link rel="prefetch" href="/Bloging/assets/js/25.c2a6f1d8.js"><link rel="prefetch" href="/Bloging/assets/js/26.c6d4c468.js"><link rel="prefetch" href="/Bloging/assets/js/27.bb3fd285.js"><link rel="prefetch" href="/Bloging/assets/js/28.9808631f.js"><link rel="prefetch" href="/Bloging/assets/js/29.3f7831ce.js"><link rel="prefetch" href="/Bloging/assets/js/30.58baf494.js"><link rel="prefetch" href="/Bloging/assets/js/31.2bbd00ba.js"><link rel="prefetch" href="/Bloging/assets/js/32.933e6496.js"><link rel="prefetch" href="/Bloging/assets/js/33.9a465bb3.js"><link rel="prefetch" href="/Bloging/assets/js/34.473d46f4.js"><link rel="prefetch" href="/Bloging/assets/js/35.564f3522.js"><link rel="prefetch" href="/Bloging/assets/js/36.111cb779.js"><link rel="prefetch" href="/Bloging/assets/js/37.fd06e443.js"><link rel="prefetch" href="/Bloging/assets/js/38.095ad4e9.js"><link rel="prefetch" href="/Bloging/assets/js/39.65c812d0.js"><link rel="prefetch" href="/Bloging/assets/js/40.c22496a3.js"><link rel="prefetch" href="/Bloging/assets/js/41.0403c37d.js"><link rel="prefetch" href="/Bloging/assets/js/42.bbb3f4b9.js"><link rel="prefetch" href="/Bloging/assets/js/43.f6e9dfff.js"><link rel="prefetch" href="/Bloging/assets/js/44.b1d9d695.js"><link rel="prefetch" href="/Bloging/assets/js/45.b124f4de.js"><link rel="prefetch" href="/Bloging/assets/js/46.1c42efc4.js"><link rel="prefetch" href="/Bloging/assets/js/47.05f1a85f.js"><link rel="prefetch" href="/Bloging/assets/js/48.95136e76.js"><link rel="prefetch" href="/Bloging/assets/js/49.99604df1.js"><link rel="prefetch" href="/Bloging/assets/js/5.f19f5ae5.js"><link rel="prefetch" href="/Bloging/assets/js/50.06b7fbf2.js"><link rel="prefetch" href="/Bloging/assets/js/51.165c94b9.js"><link rel="prefetch" href="/Bloging/assets/js/52.99650a38.js"><link rel="prefetch" href="/Bloging/assets/js/53.62371787.js"><link rel="prefetch" href="/Bloging/assets/js/54.6172303f.js"><link rel="prefetch" href="/Bloging/assets/js/55.bbdcb602.js"><link rel="prefetch" href="/Bloging/assets/js/56.729cdf74.js"><link rel="prefetch" href="/Bloging/assets/js/57.6e908e75.js"><link rel="prefetch" href="/Bloging/assets/js/58.2864a48c.js"><link rel="prefetch" href="/Bloging/assets/js/59.4e55f1ca.js"><link rel="prefetch" href="/Bloging/assets/js/6.60fb555c.js"><link rel="prefetch" href="/Bloging/assets/js/60.af74aae5.js"><link rel="prefetch" href="/Bloging/assets/js/61.7e175f61.js"><link rel="prefetch" href="/Bloging/assets/js/62.6980d3f9.js"><link rel="prefetch" href="/Bloging/assets/js/63.dcb7f769.js"><link rel="prefetch" href="/Bloging/assets/js/64.775818f3.js"><link rel="prefetch" href="/Bloging/assets/js/65.5bbe9a48.js"><link rel="prefetch" href="/Bloging/assets/js/66.b31397be.js"><link rel="prefetch" href="/Bloging/assets/js/67.de105626.js"><link rel="prefetch" href="/Bloging/assets/js/68.1e478521.js"><link rel="prefetch" href="/Bloging/assets/js/69.c7503524.js"><link rel="prefetch" href="/Bloging/assets/js/7.2714efd9.js"><link rel="prefetch" href="/Bloging/assets/js/70.6be8694b.js"><link rel="prefetch" href="/Bloging/assets/js/71.db89b70b.js"><link rel="prefetch" href="/Bloging/assets/js/72.f1a2c437.js"><link rel="prefetch" href="/Bloging/assets/js/73.0f1af1e2.js"><link rel="prefetch" href="/Bloging/assets/js/74.15075fcd.js"><link rel="prefetch" href="/Bloging/assets/js/75.531a778b.js"><link rel="prefetch" href="/Bloging/assets/js/77.8db75474.js"><link rel="prefetch" href="/Bloging/assets/js/78.96c5b697.js"><link rel="prefetch" href="/Bloging/assets/js/79.332491db.js"><link rel="prefetch" href="/Bloging/assets/js/8.ac2f19b0.js"><link rel="prefetch" href="/Bloging/assets/js/80.ccf98d3b.js"><link rel="prefetch" href="/Bloging/assets/js/81.89be4231.js"><link rel="prefetch" href="/Bloging/assets/js/82.b1f4a735.js"><link rel="prefetch" href="/Bloging/assets/js/83.a5e40604.js"><link rel="prefetch" href="/Bloging/assets/js/84.488775af.js"><link rel="prefetch" href="/Bloging/assets/js/85.30930aef.js"><link rel="prefetch" href="/Bloging/assets/js/86.a68eabf3.js"><link rel="prefetch" href="/Bloging/assets/js/87.7025211e.js"><link rel="prefetch" href="/Bloging/assets/js/88.3ef32de1.js"><link rel="prefetch" href="/Bloging/assets/js/89.ca3f25c5.js"><link rel="prefetch" href="/Bloging/assets/js/9.27a091e8.js"><link rel="prefetch" href="/Bloging/assets/js/90.225aeae1.js"><link rel="prefetch" href="/Bloging/assets/js/91.e3a5438b.js"><link rel="prefetch" href="/Bloging/assets/js/92.48956e7f.js"><link rel="prefetch" href="/Bloging/assets/js/93.6891c60d.js"><link rel="prefetch" href="/Bloging/assets/js/94.07cde64b.js"><link rel="prefetch" href="/Bloging/assets/js/95.4966444e.js"><link rel="prefetch" href="/Bloging/assets/js/96.c1853b5f.js"><link rel="prefetch" href="/Bloging/assets/js/97.e8c1d321.js"><link rel="prefetch" href="/Bloging/assets/js/98.25b0955e.js"><link rel="prefetch" href="/Bloging/assets/js/99.dbab7db6.js">
    <link rel="stylesheet" href="/Bloging/assets/css/0.styles.7e19c1e2.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Bloging/" class="home-link router-link-active"><img src="/Bloging/img/logo.png" alt="you know nothing" class="logo"> <span class="site-name can-hide">you know nothing</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Bloging/" class="nav-link firstMenu-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><a href="/Bloging/pages/7f4764/" class="link-title">基础知识</a> <span class="title" style="display:none;">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Bloging/pages/e42f0c/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/ef83a2/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/c13c31/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/76f4b0/" class="nav-link">TypeScript</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架通识" class="dropdown-title"><a href="/Bloging/pages/a787e4/" class="link-title">框架通识</a> <span class="title" style="display:none;">框架通识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Bloging/pages/bb33b9/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/ddcd99/" class="nav-link">React</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端延展" class="dropdown-title"><a href="/Bloging/pages/a9e92d" class="link-title">前端延展</a> <span class="title" style="display:none;">前端延展</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Bloging/pages/d1fdc6/" class="nav-link">前端安全</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/c926f9/" class="nav-link">微信相关</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/82468b/" class="nav-link">性能优化</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/b79286/" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/dcb6ce/" class="nav-link">Node</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/5fa3df/" class="nav-link">hybridApp </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学无止境" class="dropdown-title"><a href="/Bloging/pages/e46525/" class="link-title">学无止境</a> <span class="title" style="display:none;">学无止境</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Bloging/pages/46e3e9/" class="nav-link">算法</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/1/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/2/" class="nav-link">Python</a></li></ul></div></div><div class="nav-item"><a href="/Bloging/pages/fcc60b/" class="nav-link firstMenu-link">闲暇之余</a></div> <a href="https://github.com/zhouyalongs/zhouyalongs.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/MssText/learn@master/images/49203535.35emn5vryma0.png"> <div class="blogger-info"><h3>zhouyalong</h3> <span>天凉好个秋</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/Bloging/" class="nav-link firstMenu-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><a href="/Bloging/pages/7f4764/" class="link-title">基础知识</a> <span class="title" style="display:none;">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Bloging/pages/e42f0c/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/ef83a2/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/c13c31/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/76f4b0/" class="nav-link">TypeScript</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架通识" class="dropdown-title"><a href="/Bloging/pages/a787e4/" class="link-title">框架通识</a> <span class="title" style="display:none;">框架通识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Bloging/pages/bb33b9/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/ddcd99/" class="nav-link">React</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端延展" class="dropdown-title"><a href="/Bloging/pages/a9e92d" class="link-title">前端延展</a> <span class="title" style="display:none;">前端延展</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Bloging/pages/d1fdc6/" class="nav-link">前端安全</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/c926f9/" class="nav-link">微信相关</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/82468b/" class="nav-link">性能优化</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/b79286/" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/dcb6ce/" class="nav-link">Node</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/5fa3df/" class="nav-link">hybridApp </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学无止境" class="dropdown-title"><a href="/Bloging/pages/e46525/" class="link-title">学无止境</a> <span class="title" style="display:none;">学无止境</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Bloging/pages/46e3e9/" class="nav-link">算法</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/1/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/Bloging/pages/2/" class="nav-link">Python</a></li></ul></div></div><div class="nav-item"><a href="/Bloging/pages/fcc60b/" class="nav-link firstMenu-link">闲暇之余</a></div> <a href="https://github.com/zhouyalongs/zhouyalongs.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端安全</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>微信相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>性能优化</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Bloging/pages/82468b/" class="sidebar-link">性能优化概述</a></li><li><a href="/Bloging/pages/e4ecdb/" class="sidebar-link">指标采集</a></li><li><a href="/Bloging/pages/b2f269/" aria-current="page" class="active sidebar-link">搭建平台</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Bloging/pages/b2f269/#前端性能平台" class="sidebar-link">前端性能平台</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Bloging/pages/b2f269/#性能数据处理后台" class="sidebar-link">性能数据处理后台</a></li><li class="sidebar-sub-header"><a href="/Bloging/pages/b2f269/#前端数据可视化展示前台" class="sidebar-link">前端数据可视化展示前台</a></li><li class="sidebar-sub-header"><a href="/Bloging/pages/b2f269/#小结" class="sidebar-link">小结</a></li></ul></li><li class="sidebar-sub-header"><a href="/Bloging/pages/b2f269/#监控预警" class="sidebar-link">监控预警</a></li><li class="sidebar-sub-header"><a href="/Bloging/pages/b2f269/#问题诊断" class="sidebar-link">问题诊断</a></li><li class="sidebar-sub-header"><a href="/Bloging/pages/b2f269/#效果评估" class="sidebar-link">效果评估</a></li></ul></li><li><a href="/Bloging/pages/c512b4/" class="sidebar-link">优化手段</a></li><li><a href="/Bloging/pages/c2cc11/" class="sidebar-link">Hybrid优化手段</a></li><li><a href="/Bloging/pages/0adf45/" class="sidebar-link">性能优化体系演进</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>hybridApp</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-783bcf04><div class="articleInfo" data-v-783bcf04><ul class="breadcrumbs" data-v-783bcf04><li data-v-783bcf04><a href="/Bloging/" title="首页" class="iconfont icon-home router-link-active" data-v-783bcf04></a></li> <li data-v-783bcf04><a href="/Bloging/pages/a9e92d/" title="前端延展-目录页" data-v-783bcf04>前端延展</a></li> <li data-v-783bcf04><a href="/Bloging/pages/a9e92d/#性能优化" title="前端延展#性能优化" data-v-783bcf04>性能优化</a></li> <!----></ul> <div class="info" data-v-783bcf04><div title="作者" class="author iconfont icon-touxiang" data-v-783bcf04><a href="https://github.com/zhouyalongs" target="_blank" title="作者" class="beLink" data-v-783bcf04>zhouyalong</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-783bcf04><a href="javascript:;" data-v-783bcf04>2022-08-10</a></div> <!----> <div class="date iconfont icon-yuedu" data-v-783bcf04><span data-v-783bcf04>时间 50分钟</span></div> <div id="/pages/b2f269/" data-flag-title="搭建平台" class="leancloud_visitors date iconfont icon-eye" data-v-783bcf04><span class="post-meta-item-text" data-v-783bcf04>阅读量 </span> <span class="leancloud-visitors-count" data-v-783bcf04>0</span></div></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">
          搭建平台
        </h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="前端性能平台"><a href="#前端性能平台" class="header-anchor">#</a> 前端性能平台</h2> <p>前端性能平台是一个 Web 系统，主要包括后台的性能数据处理和前台的可视化展示两部分。数据处理后台主要是对 SDK 上报后的性能指标进行处理和运算，具体包括数据入库、数据清洗、数据计算，做完这些后，前台会对结果进行可视化展现，我们借助它就可以实时监督前端的性能情况。主要对当前用户关注的性能模块进行展示，内容包括首屏时间、秒开率和采样PV。</p> <p>性能平台技术架构图</p> <p><img src="/performance/platform_1.png" alt="性能平台技术架构图"></p> <p>这是具体的技术架构图，从底层到前台大致情况如下：</p> <ul><li>数据接入层，主要是接收 SDK上报的性能数据，做数据处理后入库，包含的技术有 Node.js、Node-sechdule、Node-mailer；</li> <li>数据计算层，会对性能数据做计算处理，需要的技术有 Kafka、Spark、Hive、HDFS；</li> <li>存储层，包括 MySQL + MongoDB ，性能平台需要的数据会来这里；</li> <li>平台层，也就是展示给用户的部分，需要的技术有 React、Ant design、Antv、Less。</li></ul> <h3 id="性能数据处理后台"><a href="#性能数据处理后台" class="header-anchor">#</a> 性能数据处理后台</h3> <p>想要搭建性能平台，我们先来看它的性能处理后台情况。一般性能 SDK 上报数据的处理过程是这样的：</p> <p>客户端借助 SDK 上报性能数据指标，数据接入层（图中绿色部分）接收相应数据，并做协议转换等简单处理后，作为生产者向 Kafka 写入数据；</p> <p>数据计算层（图中橙色部分）作为消费者，从 Kafka 读数据存入 Hive（Hadoop平台的存储表），Hadoop 平台借助 Spark 做数据分析计算；</p> <p>借助 Hive 提供的接口，数据计算层使用 SQL 语句从 Hive 拉取计算后的数据到数据库平台（MongoDB），平台层取出数据，准备数据可视化展现的数据。</p> <p>上述数据流程，对应的性能数据后台的搭建过程如下：</p> <p>第一步是入库，客户端借助 SDK 上报性能数据指标后，需要后端服务层的处理，这里我们选取的是 NodeJS 做后端，利用 Controller 层对数据做处理。</p> <p>为了避免数据库出现“脏数据”（如空数据、异常数据），影响后续数据处理，我们将 SDK 上报的数据通过 URL 解析成 key-value 格式的数据，对数据进行空数据删除，异常数据舍弃等操作。然后我们让数据写进消息队列 Kafka。</p> <p>为什么不是直接存入 Hive 呢？</p> <p>因为客户端上报的性能数据量和用户规模有关。如果直接入库到 Hive，遇到高并发的时候，会因为服务器扛不住而导致数据丢失。与此同时，因为数据下游（数据的使用方，如数据清洗计算平台，性能预警模块）会有多个数据接收端，直接入库的话也会造成数据重复。</p> <p>所以最好我们选择 Kafka，先让数据写进消息队列。Kafka 能通过缓存，慢慢接收这些数据，降低流量洪峰压力。同时，消息队列还有接收数据后将其删除的特点，可以避免数据重复的问题。</p> <p>第二步，对 Kafka 中的数据，做数据清洗和数据计算。</p> <p>数据清洗，是指针对性能上报单条数据进行核对校验的过程。所清洗的数据包括：</p> <ul><li>对重复数据的处理，即同一个用户网络出错时，多次重试导致上传了好几条首屏时间相关的数据；</li> <li>对缺失数据的处理，虽然上报了首屏时间，但白屏时间或者卡顿时间计算时没能给出；</li> <li>对错误数据的处理，即数据超出正常范围，出现负值或者超出极大值的情况。</li></ul> <p>这几种类型数据问题如果不处理，最终会影响计算结果的准确性。那么该怎么处理呢？</p> <ul><li>遇到重复数据，直接去重删除即可。</li> <li>遇到缺失数据，我们在 Spark 平台上，先根据上报的 Performance 数据进行计算补全，如果无法补全的，就直接舍弃掉，不然会出现后续无法入库的情况。</li> <li>遇到超出正常范围的数据，如负值或者超过 10 秒以上的数据，把它当作无效数据，直接舍弃掉。</li></ul> <p>做完数据清洗之后，我们还需要使用 Spark 做数据计算，为可视化展现准备数据。具体需要做以下数据计算：</p> <p>首屏时间分布的计算，1s ～ 2s 占比多少，2s ～ 4s 占比多少；</p> <p>秒开率的计算，首屏时间小于等于 1 秒的数据占比；</p> <p>页面瀑布流时间的计算。</p> <p>其中，页面瀑布流时间是对首屏时间的细分，包括 DNS 查询、TCP链接、请求耗时、内容传输、资源解析、DOM 解析和资源加载的时间。这些细分时间点，是我们根据 SDK 上报的 Performance 接口数据指标计算出来的，前端工程师根据页面瀑布流时间，可以快速定位性能瓶颈点出现在哪个环节。</p> <p>第三步，准备性能前台所需的可视化数据。</p> <p>为了完成前台展现，性能平台需要登录功能，还需要做一些用户关注的模块信息，比如前端开发者添加关注的业务模块。我们可以用关系数据库去存储这些数据，具体可以选择 MySQL完成账号权限系统和关注业务模块对应的数据表。</p> <p>而性能数据，因为都是单条性能信息，相互之间并没有什么关系，可以用 MongoDB 做存储。具体来说，我们可以用 NodeJS 提供的定时脚本（Node-sechdule）从 Spark 取到数据导入到 MongoDB 中。</p> <h3 id="前端数据可视化展示前台"><a href="#前端数据可视化展示前台" class="header-anchor">#</a> 前端数据可视化展示前台</h3> <p>前端数据可视化展现前台，整体上只有两个页面，大盘页和详情页。</p> <p>大盘页包括一个个业务的性能简图。每一个性能简图包括首屏时间、秒开率、采样 PV 数据。点击性能简图上的“进入详情”链接，就可以进入详情页。初次进入大盘页的时候，需要你登录并关注相关的业务，然后就可以在大盘首页看到相关的性能情况。</p> <p>详情页的设计的初衷是为了对性能简图做进一步的补充，除了展示对应性能简图的秒开率、性能均值细节、白屏均值细节之外，还会展示终端信息，比如多少比例在IOS端，多少比例在Android端，以方便用户根据不同场景去做优化。</p> <p><img src="/performance/platform_2.png" alt="详情页性能均值"></p> <p>详情页性能均值</p> <p><img src="/performance/platform_3.png" alt="详情页终端类型"></p> <p>详情页终端类型</p> <p>同时，为了解秒开率不达标原因或者首屏时间变慢的细节在哪里，我们会给出页面加载瀑布流，前面数据处理阶段已经提到可以使用的数据（包括 DNS 查询、TCP链接、请求耗时、内容传输、资源解析、DOM 解析和资源加载的时间），套用 AntV （阿里巴巴集团的数据可视化方案）的瀑布流模板即可完成数据展现。</p> <p><img src="/performance/platform_4.png" alt="页面加载瀑布流"></p> <p>页面加载瀑布流</p> <p>那么，大盘页和详情页如何实现的呢？</p> <p>首先是前端展示技术栈的选择，对应技术架构图中的淡黄色部分，因为这两个页面都属于 PC 端后台页面，主要给公司前端开发者使用，功能上更多是数据可视化展示，非常适合用 React 技术栈做开发。</p> <p>为了更好实现首屏时间、秒开率和采用 PV 的功能效果，我们使用 AntdPro 的模板，相关的配套的数据可视化方案，我推荐 Antv，因为它能够满足我们在首屏时间、秒开率等性能指标的展示需求，用起来比较简单（开箱即用），功能灵活且扩展性强（比如秒开率部分，要自定义一些图形，能够较好满足）。</p> <p>大盘页和详情页的数据展示效果比较丰富多样，相应的 CSS 代码逻辑就比较复杂，为了让 CSS代码更容易维护和扩展，CSS 方面可以选用 Less 框架。</p> <p>接下来是前后端交互方面，为了让前后台更独立，大盘页、详情页与后端的通信通过 HTTP 接口来实现，使用 nginx 作为 Web Server。为了让传输更高效，我们采用 compression 对 HTTP 传输内容进行 GZip 压缩处理。</p> <p>最后是后台服务部分，为了让性能平台开发过程更简单，效率更高，同时平台本身的性能体验更流畅，后台服务方面可以选用 Egg.js（基于 NodeJS 的开发框架）做开发，进行数据处理和存储服务。</p> <p>为了解决监控预警的问题，我们借助 Node-schedule 做调度和定时任务的处理，通过 node-mailer 进行邮件报警。有关预警部分的实现细节，我会在下一讲展开介绍。</p> <h3 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h3> <p><img src="/performance/platform_5.png" alt="小结"></p> <h2 id="监控预警"><a href="#监控预警" class="header-anchor">#</a> 监控预警</h2> <p>监控预警部分，我们借助 Node-schedule 做调度和定时任务的处理，通过 node-mailer 进行邮件报警。具体来说我们通过以下几步来实现。</p> <p>第一步，准备预警数据。</p> <p>在做完数据清洗之后，一个分支使用 Spark 做计算，另外一个分支使用 Flink 实时数据计算。这两者的区别在于后者的数据是实时处理的，因为监控预警如果不实时的话，就没有意义了。有关数据的处理，我是这样做的：超过 2s 的数据，或者认定为卡顿的数据，直接标记为预警数据。实际当中你也可以根据情况去定义和处理。</p> <p>第二步，我们借助 Node-schedule，用一批定时任务将预警数据通过 Node.js，拉取数据到 MongoDB 的预警表中。</p> <p>第三步，预警的展示流程。根据预警方式不同，样式展示也不同。具体来说，预警的方式有三种：企业微信报警通知、邮件报警通知、短信报警通知。</p> <p>以手机列表页为例，性能标准是首屏时间 1.5s，秒开率 90%，超过这个标准就会在性能平台预警模块展示，按照严重程度倒序排列展示。如果超出 10%，平台上会标红展示，并会发企业微信报警通知；如果超过 20%，会发借助 node-mailer 做邮件报警；如果超出 30%，会发短信报警通知。</p> <p>注意，预警通知需要用到通信资源，为了避免数据量太大而浪费资源，一般对 App 首页核心的导航位进行页面监控即可。</p> <h2 id="问题诊断"><a href="#问题诊断" class="header-anchor">#</a> 问题诊断</h2> <p>当预警功能做好后，前端性能平台就可以对重要指标进行实时监督了。当发现性能问题——不论是我们自己发现还是用户反馈，都需要先对问题进行诊断，然后看情况是否需要进一步采取措施。</p> <p>一般问题诊断时需要先确认是共性问题还是个例问题。如果是共性问题，那接下来我们就开始诊断和优化；如果是个例问题，是因为偶发性因素导致的（如个人的网络抖动、手机内存占用太多、用户连了代理等），则不需要进行专门优化。</p> <p>那怎么判断呢？</p> <p>一般共性问题，我们可以通过大量用户的数据指标是否正常来判断。具体来说，当前端工程师遇到用户来反馈某个性能问题时，先去性能平台看性能指标，如果性能指标中的首屏时间的均值出现异常，就是共性问题。然后再去看究竟是哪个终端机型下的情况，加载瀑布流是怎样的，会慢在哪个环节。</p> <p>以手机列表页某次加载慢的问题为例，某同事收到天津用户反馈说发布页面加载比较慢，他是怎么做的呢？</p> <p>他先是看了性能平台，发现在中国移动网络下，发布页面的首屏时间均值很长，超过了 3s，说明这是共性问题。然后他看了发布页面的加载瀑布流时间后，发现一个负责上传图片的 JS 文件加载特别慢。原因是它在资源加载时被阻塞住了，阻塞它的是一个负责对图片上传后实施滤镜功能的文件。这个文件显然可以延迟加载，即上传完成后再加载都可以。于是他调整完加载策略，解决了用户反馈的问题。</p> <p>如果我们发现大量用户的首屏指标（首屏时间均值和分位值）没问题，就可以判断为个例问题。有别于共性问题可以从平台上定位出具体是哪个瓶颈点，个例问题一般需要客服联系用户去解决，不需要代码层面做什么。</p> <p>根据我过往对性能优化方面的经验，我整理了一个诊断清单：</p> <ul><li>全量 vs 增量</li> <li>同步 vs 异步</li> <li>实时 vs 缓存</li> <li>原片 vs 压缩</li></ul> <p>全量 vs 增量，是指页面加载特别是列表页加载数据慢的情况，要从数据加载是全量还是增量的角度去诊断问题。</p> <p>以京东 App 列表页为例，首屏一般展示 4 条左右的商品数据，PC 页首屏展示 50 条商品数据，后端数据接口一般是同一套（无论是针对移动端还是 PC 端），这时 App 列表页请求后端接口，后端一次返回 50 条数据就不合适了。更好的做法是，分接口先拉取首屏所需的 4 条数据，然后在页面滚动或者下拉操作加载后续数据即可。</p> <p>值得注意的是，为了保持体验流畅，有时候我们会多加载几条，比如开始加载 6 条，刚开始滚动到首屏结束时，第 5 条数据已经有了（此时请求第 7 条数据），不需要等后端服务器返回就可以展示。</p> <p>同步 vs 异步，是指遇到页面加载时间过长的情形，是否因为接口同步加载导致的问题。此时可以用异步的思路去解决。比如电商 App 列表页，一般需要先去拉取导航位置图片和链接信息，然后去拉取商品列表信息，这会延长加载时间。此时我们可以考虑同时拉取两个列表，中间有依赖关系的地方，集中到第一个接口中去获取，然后就可以并行去请求两个接口了。</p> <p>实时 vs 缓存，是指遇到接口数据或者静态资源加载过长时候，要看一下是否是因为使用了实时数据的角度导致的，是否可以缓存策略来解决问题。</p> <p>具体来说，如果是能够缓存的数据（如双 11 的榜单、页面中的 JS、CSS 资源），建议优先检查一下是否做了缓存处理；如果用的是实时数据（如商品实时的价格，库存实时的情况），要看一下是否会导致性能瓶颈。在不影响用户体验的前提下，还可以看看某些数据是不是可以定时去更新，如用户购买榜单信息等。</p> <p>有关静态资源（如 JS、CSS文件）缓存处理，比较好的方法是，将每次渲染后的页面做缓存，页面打开时就展示，然后局部细微做更新，确保用户体验更好。</p> <p>原片 vs 压缩， 是指当遇到图片加载缓慢的问题，可以查看下图片是否是原图。如果是，可以做一些无损或者有损压缩处理，以此提高加载速度，或者尽量不使用原始图片（如 png-24），优先使用 webp 等图片格式。</p> <p>为了提高性能，页面在展示时，可以先设置成展示一张低质量的图片，遇到许多用户特别关注这张图片时，再做进一步的优化处理也不迟。具体的优化手段我会在后续章节里面提到。</p> <h2 id="效果评估"><a href="#效果评估" class="header-anchor">#</a> 效果评估</h2> <p>假设我们经过问题诊断，也进行了优化，那么我们做完一个性能优化项目之后，如何评估项目效果呢？如果仅仅给出项目的性能指标变化，比如做完移动 M 站性能优化后，首屏时间提升 30%，并不足以触达业务同学的内心。</p> <p>最好的方式就是通过性能优化，提高业务数据指标。 以电商 App 为例，最关注的一个指标是从访问用户到订单的转化（比如 100 个用户成了 3 单，转化率为 3%）。那么，性能指标和转化率指标有什么关系呢？</p> <p>根据 skilled.co 的数据表示，沃尔玛在线网站页面加载时间每减少一秒，转化率增加 2%。我之前的移动端 M 站性能优化项目也验证过这一点，当时性能有了 30% 的提升，列表页到详情页的转化提高了 10%。当然，这里面有一个隐含假设，当前页面的首屏时间远大于 1s（如 2s ～ 5s），如果首屏已经秒开，提升将非常有限。</p> <p>具体怎么评估转化率指标？我们需要用优化前后两个版本对比的方式，去看转化率指标的变化，也就是你经常听到的AB 测试。</p> <p>具体怎么做呢？我以列表页性能优化项目为例，在做性能优化之前，先把列表页面分成 A、B 两个版本，这两个版本可以通过条件语句区分代码块，还可以通过模板和路由的方式来区分。其中，A 版本是筛选项优化前的，B 版本是筛选项化后的。此处我们选择用IF条件语句在列表页代码里面做区分，如果当前需要展示版本A，URL 参数中传入 version = A。</p> <p>然后当用户到了列表页加入购物车下单时，我们用代码在提交给购物车的订单上做一个标记（from=version）。这样交易成功后，通过统计埋点就可以统计到 A、B 版本各自对应的订单转化率。转化率的变化就是列表页性能优化项目的优化数据。</p> <p>这里需要注意一点，为了确保同一个版本波动率很小，在做对比之前还要先对列表页做 AA 测试，也就是两个版本代码完全一样的测试。当它们的差异基本上万分之一以下了再去做 AB 测试。</p> <p>小结
<img src="/performance/platform_6.png" alt="小结"></p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/zhouyalongs/zhouyalongs.github.io/edit/master/docs/03.前端延展/02.性能优化/03.搭建平台.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/Bloging/tags/?tag=%E6%90%AD%E5%BB%BA%E5%B9%B3%E5%8F%B0" title="标签">#搭建平台</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/08/11, 10:12:45</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/Bloging/pages/e4ecdb/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">指标采集</div></a> <a href="/Bloging/pages/c512b4/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">优化手段</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Bloging/pages/e4ecdb/" class="prev">指标采集</a></span> <span class="next"><a href="/Bloging/pages/c512b4/">优化手段</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/Bloging/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/Bloging/pages/640b08/"><div>map&amp;set</div></a> <span>01-29</span></dt></dl><dl><dd>02</dd> <dt><a href="/Bloging/pages/87ead3/"><div>方法论</div></a> <span>08-12</span></dt></dl><dl><dd>03</dd> <dt><a href="/Bloging/pages/0adf45/"><div>性能优化体系演进</div></a> <span>08-11</span></dt></dl> <dl><dd></dd> <dt><a href="/Bloging/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <!----> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">跟随系统</li><li class="iconfont icon-rijianmoshi">浅色模式</li><li class="iconfont icon-yejianmoshi">深色模式</li><li class="iconfont icon-yuedu">阅读模式</li></ul></div> <div title="选择主题色" class="button blur theme-mode-but iconfont icon-qiehuan"><ul class="select-box" style="display:none;"><li class="iconfont"><sub class="theme-select-block" style="background-color:#3eaf7c;"></sub> <span>生命绿</span></li><li class="iconfont"><sub class="theme-select-block" style="background-color:#D59C12;"></sub> <span>收获黄</span></li><li class="iconfont"><sub class="theme-select-block" style="background-color:#3498DB;"></sub> <span>天空蓝</span></li><li class="iconfont"><sub class="theme-select-block" style="background-color:#E74C3C;"></sub> <span>激情红</span></li><li class="iconfont"><sub class="theme-select-block" style="background-color:#8e44ad;"></sub> <span>高贵紫</span></li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/Bloging/assets/js/app.2aa6d5b3.js" defer></script><script src="/Bloging/assets/js/3.96531fce.js" defer></script><script src="/Bloging/assets/js/4.8451043b.js" defer></script><script src="/Bloging/assets/js/76.4b6dec3b.js" defer></script>
  </body>
</html>
